---
layout: default
---

<div class="post-wrapper">
  <article class="post-container">
    <header class="post-header">
      <h1 class="post-title">{{ page.title }}</h1>
      <div class="post-meta">
        <time datetime="{{ page.date | date_to_xmlschema }}">
          {{ page.date | date: "%B %d, %Y" }}
        </time>
        <span class="separator">â€¢</span>
        <span class="reading-time">
          {% assign words = content | number_of_words %}
          {% if words < 360 %}
            1 min read
          {% else %}
            {{ words | divided_by: 180 }} min read
          {% endif %}
        </span>
      </div>

      {% if page.tags.size > 0 %}
      <div class="post-tags">
        {% for tag in page.tags %}
          <a href="{{ site.baseurl }}/category/{{ tag }}" class="tag-pill">#{{ tag }}</a>
        {% endfor %}
      </div>
      {% endif %}
    </header>

    <div class="post-content entry">
      {{ content }}
    </div>

    <div class="post-navigation">
      {% if page.previous.url %}
        <a class="nav-link prev" href="{{ page.previous.url }}">
          <span class="nav-label">Previous</span>
          <span class="nav-title">{{ page.previous.title }}</span>
        </a>
      {% else %}
        <div class="nav-link prev disabled"></div>
      {% endif %}

      {% if page.next.url %}
        <a class="nav-link next" href="{{ page.next.url }}">
          <span class="nav-label">Next</span>
          <span class="nav-title">{{ page.next.title }}</span>
        </a>
      {% else %}
        <div class="nav-link next disabled"></div>
      {% endif %}
    </div>

    {% include disqus.html %}
  </article>

  <aside class="toc-sidebar" id="toc-sidebar">
    <nav class="toc-nav">
      <h4 class="toc-title">On This Page</h4>
      <ul class="toc-list" id="toc-list">
        <!-- TOC items will be generated by JavaScript -->
      </ul>
    </nav>
  </aside>
</div>

<script>
(function() {
  const tocList = document.getElementById('toc-list');
  const tocSidebar = document.getElementById('toc-sidebar');
  const postContent = document.querySelector('.post-content');

  if (!tocList || !postContent) return;

  // Get all headings (h1-h6) in the post content
  const headings = postContent.querySelectorAll('h1, h2, h3, h4, h5, h6');

  if (headings.length === 0) {
    // Hide TOC if no headings
    if (tocSidebar) tocSidebar.style.display = 'none';
    return;
  }

  // Generate TOC items
  headings.forEach(function(heading, index) {
    // Create an ID if the heading doesn't have one
    if (!heading.id) {
      heading.id = 'heading-' + index;
    }

    const li = document.createElement('li');
    li.className = 'toc-item toc-item-' + heading.tagName.toLowerCase();

    const a = document.createElement('a');
    a.href = '#' + heading.id;
    a.textContent = heading.textContent;
    a.className = 'toc-link';

    li.appendChild(a);
    tocList.appendChild(li);
  });

  // Highlight active heading on scroll
  const tocLinks = tocList.querySelectorAll('.toc-link');

  function updateActiveLink() {
    let current = '';

    headings.forEach(function(heading) {
      const rect = heading.getBoundingClientRect();
      if (rect.top <= 120) {
        current = heading.id;
      }
    });

    tocLinks.forEach(function(link) {
      link.classList.remove('is-active');
      if (link.getAttribute('href') === '#' + current) {
        link.classList.add('is-active');
      }
    });
  }

  window.addEventListener('scroll', updateActiveLink);
  updateActiveLink();
})();
</script>

