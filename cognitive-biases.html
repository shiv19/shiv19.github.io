<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cognitive Biases — Complete Field Guide</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=DM+Mono:wght@300;400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css">
<style>
  :root {
    --ink: #1a1208;
    --paper: #f5f0e8;
    --cream: #ede7d6;
    --accent: #c8440a;
    --muted: #7a6e5e;
    --card: #faf7f2;
    --ui-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    background: var(--paper);
    color: var(--ink);
    font-family: 'DM Mono', monospace;
    min-height: 100vh;
    overflow-x: hidden;
  }
  body.modal-open {
    overflow: hidden;
  }
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 9999;
    opacity: 0.4;
  }
  .page-wrap { max-width: 1200px; margin: 0 auto; }
  header {
    padding: 60px 40px 40px;
    border-bottom: 2px solid var(--ink);
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: end;
    gap: 20px;
  }
  h1 {
    font-family: 'Playfair Display', serif;
    font-size: clamp(2.5rem, 6vw, 5rem);
    line-height: 0.95;
    letter-spacing: -0.02em;
    font-style: italic;
  }
  h1 span {
    display: block;
    color: var(--accent);
    font-style: normal;
    font-size: 0.4em;
    font-family: 'DM Mono', monospace;
    font-weight: 400;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    margin-bottom: 8px;
  }
  .tagline {
    font-size: 0.8rem;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    text-align: right;
    max-width: 200px;
    line-height: 1.7;
  }
  .controls {
    padding: 20px 40px;
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    align-items: center;
    border-bottom: 1px solid var(--cream);
  }
  .filter-label {
    font-size: 0.72rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--muted);
    margin-right: 4px;
  }
  .filter-btn {
    padding: 6px 13px;
    border: 1.5px solid var(--ink);
    background: transparent;
    cursor: pointer;
    font-family: 'DM Mono', monospace;
    font-size: 0.72rem;
    letter-spacing: 0.04em;
    text-transform: uppercase;
    color: var(--ink);
    transition: background 0.12s, color 0.12s;
    border-radius: 2px;
    white-space: nowrap;
  }
  .filter-btn:hover { background: var(--cream); }
  .filter-btn.active { background: var(--ink); color: var(--paper); }
  .controls-right {
    margin-left: auto;
    display: flex;
    gap: 8px;
    align-items: center;
  }
  .search-input {
    padding: 7px 12px;
    border: 1.5px solid var(--muted);
    background: transparent;
    font-family: var(--ui-sans);
    font-size: 0.82rem;
    line-height: 1.4;
    color: var(--ink);
    outline: none;
    width: 200px;
    border-radius: 2px;
  }
  .search-input:focus { border-color: var(--ink); }
  .search-input::placeholder { color: var(--muted); }
  .view-toggle {
    display: flex;
    border: 1.5px solid var(--ink);
    border-radius: 2px;
    overflow: hidden;
  }
  .view-btn {
    padding: 6px 11px;
    border: none;
    background: transparent;
    cursor: pointer;
    font-family: 'DM Mono', monospace;
    font-size: 0.72rem;
    color: var(--ink);
    transition: background 0.12s;
  }
  .view-btn + .view-btn { border-left: 1.5px solid var(--ink); }
  .view-btn.active { background: var(--ink); color: var(--paper); }
  .stats-bar {
    padding: 12px 40px;
    font-size: 0.74rem;
    color: var(--muted);
    letter-spacing: 0.02em;
    line-height: 1.5;
    font-family: var(--ui-sans);
    border-bottom: 1px solid var(--cream);
  }

  /* GRID VIEW */
  .grid {
    padding: 32px 40px;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
  }
  .card {
    background: var(--card);
    border: 1.5px solid transparent;
    border-radius: 4px;
    padding: 24px 24px 20px;
    display: flex;
    flex-direction: column;
    height: 100%;
    cursor: pointer;
    transition: border-color 0.2s, transform 0.2s cubic-bezier(0.4,0,0.2,1), box-shadow 0.2s;
    position: relative;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
  }
  .card.animate-in { animation: fadeIn 0.35s ease both; }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to   { opacity: 1; transform: translateY(0); }
  }
  .card::before {
    content: '';
    position: absolute;
    top: 0; left: 0;
    width: 3px;
    height: 100%;
    background: var(--card-accent, var(--muted));
  }
  .card:hover { border-color: var(--ink); transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.09); }
  .card.expanded { border-color: var(--ink); }
  .card-category {
    font-size: 0.62rem;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--card-accent, var(--muted));
    margin-bottom: 8px;
    font-weight: 500;
  }
  .card-number {
    position: absolute;
    top: 16px; right: 20px;
    font-size: 1.8rem;
    font-family: 'Playfair Display', serif;
    color: var(--cream);
    font-weight: 700;
    line-height: 1;
    user-select: none;
  }
  .card h2 {
    font-family: 'Playfair Display', serif;
    font-size: 1.2rem;
    font-weight: 700;
    line-height: 1.26;
    margin-bottom: 10px;
    padding-right: 36px;
  }
  .card-summary {
    font-size: 0.86rem;
    line-height: 1.72;
    color: #3d3125;
    font-family: var(--ui-sans);
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  .card.expanded .card-summary { display: block; -webkit-line-clamp: unset; }
  .card-extra { display: none; margin-top: 14px; padding-top: 14px; border-top: 1px solid var(--cream); }
  .card.expanded .card-extra { display: block; }
  .card-extra h3 {
    font-size: 0.6rem;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--muted);
    margin-bottom: 5px;
    margin-top: 12px;
  }
  .card-extra h3:first-child { margin-top: 0; }
  .card-extra p, .card-extra li { font-size: 0.7rem; line-height: 1.7; color: #4a3e30; }
  .card-extra ul { padding-left: 14px; }
  .card-tagline {
    font-size: 0.8rem;
    color: var(--accent);
    font-weight: 500;
    margin-bottom: 10px;
    line-height: 1.55;
    font-family: var(--ui-sans);
  }
  .example-box {
    background: var(--cream);
    border-radius: 3px;
    padding: 10px 12px;
    font-size: 0.7rem;
    line-height: 1.7;
    font-style: italic;
    color: var(--ink);
    font-family: 'Playfair Display', serif;
  }
  .bias-detail-content .example-box {
    background: #f3ecd9;
    border: 1px solid #e3d9bf;
    border-left: 3px solid var(--accent);
    border-radius: 6px;
    padding: 12px 14px;
    font-size: 0.82rem;
    line-height: 1.75;
    font-style: normal;
    color: #2a2118;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
  }
  .bias-detail-modal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.58);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    padding: 20px;
    animation: fadeIn 0.2s ease;
    overscroll-behavior: contain;
    min-height: 100vh;
  }
  .bias-detail-content {
    position: relative;
    background: var(--card);
    border-radius: 10px;
    max-width: 780px;
    width: min(780px, 100%);
    max-height: calc(100vh - 40px);
    overflow: hidden;
    border: 1.5px solid var(--cream);
    box-shadow: 0 18px 40px rgba(0,0,0,0.25);
    overscroll-behavior: contain;
    display: flex;
    flex-direction: column;
  }
  .bias-detail-topbar {
    display: flex;
    justify-content: flex-end;
    padding: 10px 12px 0;
    background: linear-gradient(to bottom, rgba(250,247,242,0.98), rgba(250,247,242,0.75), rgba(250,247,242,0));
    flex-shrink: 0;
    z-index: 3;
  }
  .bias-detail-scroll {
    flex: 1 1 auto;
    min-height: 0;
    overflow: auto;
    padding: 2px 30px 18px;
    overscroll-behavior: contain;
  }
  .bias-detail-content .close-modal {
    position: static;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    font-size: 1.8rem;
    color: #6d6354;
    border-radius: 999px;
    background: rgba(245, 240, 232, 0.96);
    border: 1px solid #decfb6;
    z-index: 4;
  }
  .bias-detail-content .card-category {
    margin-bottom: 10px;
    font-size: 0.64rem;
    letter-spacing: 0.13em;
  }
  .bias-detail-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(1.5rem, 2.7vw, 2rem);
    line-height: 1.15;
    margin: 0 34px 10px 0;
    letter-spacing: -0.01em;
  }
  .bias-detail-content .card-tagline {
    margin-bottom: 14px;
    font-size: 0.86rem;
    line-height: 1.6;
    max-width: 60ch;
  }
  .bias-detail-content .card-summary {
    display: block;
    -webkit-line-clamp: unset;
    margin-bottom: 0;
    font-size: 0.95rem;
    line-height: 1.78;
    color: #3a2f22;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
  }
  .bias-detail-content .card-extra {
    display: block;
    margin-top: 18px;
    padding-top: 18px;
    border-top: 1px solid #e6ddcc;
  }
  .bias-detail-content .card-extra h3 {
    margin-top: 16px;
    margin-bottom: 7px;
    font-size: 0.64rem;
    letter-spacing: 0.11em;
  }
  .bias-detail-content .card-extra h3:first-child { margin-top: 0; }
  .bias-detail-content .card-extra p,
  .bias-detail-content .card-extra li {
    font-size: 0.92rem;
    line-height: 1.75;
    color: #33291d;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
  }
  .bias-detail-content .card-extra ul { padding-left: 20px; }
  .bias-detail-content .related-biases {
    margin-top: 10px;
    gap: 8px;
  }
  .bias-detail-content .related-tag {
    padding: 5px 11px;
    border-radius: 999px;
    font-size: 0.68rem;
  }
  .bias-detail-content .notes-section {
    margin-top: 18px;
    padding-top: 16px;
  }
  .bias-detail-content .notes-textarea {
    min-height: 90px;
    padding: 12px;
    font-size: 0.82rem;
    line-height: 1.6;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
  }
  .notes-storage-hint {
    margin-top: 7px;
    font-size: 0.66rem;
    color: var(--muted);
    line-height: 1.45;
  }
  .bias-detail-content .card-actions {
    gap: 10px;
  }
  .bias-detail-footer {
    margin-top: 0;
    padding: 12px 30px 16px;
    border-top: 1px solid #e6ddcc;
    background: linear-gradient(to top, rgba(250,247,242,0.98), rgba(250,247,242,0.85));
    flex-shrink: 0;
    z-index: 3;
  }
  .bias-detail-content .action-btn {
    padding: 7px 13px;
    font-size: 0.66rem;
  }
  .note-card {
    padding: 16px 16px 14px;
    cursor: pointer;
  }
  .note-card h2 {
    padding-right: 0;
    margin-bottom: 0;
    font-size: 1.08rem;
  }
  .note-card-head {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 10px;
    margin-bottom: 10px;
  }
  .note-card-meta {
    font-size: 0.64rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 4px;
  }
  .note-card-actions {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }
  .note-card-actions .action-btn {
    padding: 6px 10px;
    font-size: 0.6rem;
    white-space: nowrap;
  }
  .note-card-body {
    margin: 0;
    color: #32281d;
    font-size: 0.88rem;
    line-height: 1.72;
    font-family: var(--ui-sans);
    white-space: pre-wrap;
    word-break: break-word;
  }
  .note-card:not(.expanded) .note-card-body {
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 4;
    overflow: hidden;
    white-space: normal;
  }
  .note-expand-btn {
    margin-top: 10px;
    padding: 0;
    border: none;
    background: transparent;
    color: var(--accent);
    font-family: 'DM Mono', monospace;
    font-size: 0.64rem;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
  }
  .note-expand-btn:hover {
    color: var(--ink);
  }
  .expand-hint { margin-top: auto; padding-top: 13px; font-size: 0.64rem; text-transform: uppercase; letter-spacing: 0.08em; color: var(--muted); }
  .card.expanded .expand-hint { display: none; }
  .card.read { opacity: 0.55; }
  .card-read-indicator {
    position: absolute;
    top: 14px;
    right: 14px;
    width: 20px;
    height: 20px;
    border-radius: 999px;
    display: grid;
    place-items: center;
    color: var(--accent);
    background: rgba(200, 68, 10, 0.14);
    border: 1px solid rgba(200, 68, 10, 0.25);
    font-size: 0.72rem;
  }
  .card.read .card-number { display: none; }
  .mark-read-btn {
    margin-top: 14px;
    padding: 6px 12px;
    border: 1.5px solid var(--muted);
    background: transparent;
    cursor: pointer;
    font-family: 'DM Mono', monospace;
    font-size: 0.6rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--muted);
    border-radius: 2px;
    transition: all 0.12s;
  }
  .mark-read-btn:hover { background: var(--cream); border-color: var(--ink); color: var(--ink); }
  .card.read .mark-read-btn { border-color: var(--accent); color: var(--accent); }

  .progress-section { padding: 16px 40px; border-bottom: 1px solid var(--cream); background: var(--card); }
  .progress-stats { display: flex; justify-content: space-between; font-size: 0.76rem; color: var(--muted); margin-bottom: 8px; line-height: 1.45; font-family: var(--ui-sans); }
  .progress-stats strong { color: var(--ink); }
  .streak { color: var(--accent); }
  .progress-track { height: 6px; background: var(--cream); border-radius: 3px; overflow: hidden; }
  .progress-fill { height: 100%; background: var(--accent); border-radius: 3px; transition: width 0.3s ease; }

  .related-biases { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 8px; }
  .related-tag {
    padding: 4px 10px;
    background: var(--cream);
    border-radius: 3px;
    font-size: 0.68rem;
    cursor: pointer;
    transition: background 0.12s;
  }
  .related-tag:hover { background: var(--ink); color: var(--paper); }

  .card-actions { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 14px; padding-top: 14px; border-top: 1px solid var(--cream); }
  .action-btn {
    padding: 6px 12px;
    border: 1.5px solid var(--muted);
    background: transparent;
    cursor: pointer;
    font-family: 'DM Mono', monospace;
    font-size: 0.64rem;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    color: var(--muted);
    border-radius: 2px;
    transition: all 0.12s;
  }
  .action-btn:hover { background: var(--cream); border-color: var(--ink); color: var(--ink); }
  .action-btn.disabled,
  .action-btn:disabled {
    opacity: 0.55;
    cursor: not-allowed;
    border-color: #b9ad9d;
    color: #8c7c68;
    background: transparent;
  }
  .icon-inline {
    margin-right: 6px;
    font-size: 0.9em;
    vertical-align: -0.08em;
  }
  .icon-trailing {
    margin-left: 6px;
    font-size: 0.9em;
    vertical-align: -0.08em;
  }

  .surprise-btn {
    padding: 6px 13px;
    border: 1.5px solid var(--accent);
    background: transparent;
    cursor: pointer;
    font-family: 'DM Mono', monospace;
    font-size: 0.72rem;
    letter-spacing: 0.04em;
    text-transform: uppercase;
    color: var(--accent);
    border-radius: 2px;
    transition: all 0.12s;
  }
  .surprise-btn:hover { background: var(--accent); color: var(--paper); }
  .surprise-btn.active { background: var(--accent); color: var(--paper); }
  .surprise-btn.disabled,
  .surprise-btn:disabled {
    border-color: #b89b8a;
    color: #b89b8a;
    cursor: not-allowed;
    background: transparent;
    opacity: 0.7;
  }
  .surprise-btn.disabled:hover,
  .surprise-btn:disabled:hover {
    background: transparent;
    color: #b89b8a;
  }
  .reset-btn {
    border-color: #9e3a17;
    color: #9e3a17;
  }
  .reset-btn:hover {
    background: #9e3a17;
    color: var(--paper);
  }

  @keyframes slideUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .quiz-modal, .flashcard-modal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    animation: fadeIn 0.3s ease;
    overscroll-behavior: contain;
  }
  .quiz-content, .flashcard-content {
    background: var(--card);
    padding: 40px;
    max-width: 600px;
    width: 90%;
    border-radius: 8px;
    animation: slideUp 0.3s ease;
    max-height: calc(100vh - 40px);
    overflow: auto;
    overscroll-behavior: contain;
  }
  @supports (height: 100dvh) {
    .bias-detail-modal {
      min-height: 100dvh;
    }
    .bias-detail-content {
      max-height: calc(100dvh - 40px);
    }
    .quiz-content, .flashcard-content {
      max-height: calc(100dvh - 40px);
    }
  }
  .quiz-label {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--accent);
    margin-bottom: 8px;
  }
  .quiz-question {
    font-size: 1rem;
    line-height: 1.7;
    color: var(--ink);
    margin-bottom: 24px;
  }
  .quiz-options {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  .quiz-option {
    padding: 12px 16px;
    border: 1.5px solid var(--cream);
    background: transparent;
    cursor: pointer;
    font-family: 'DM Mono', monospace;
    font-size: 0.75rem;
    color: var(--ink);
    border-radius: 4px;
    text-align: left;
    transition: all 0.12s;
  }
  .quiz-option:hover { background: var(--cream); border-color: var(--ink); }
  .quiz-option.correct { background: #d4edda; border-color: #28a745; }
  .quiz-option.wrong { background: #f8d7da; border-color: #dc3545; }
  .quiz-result {
    margin-top: 16px;
    padding: 12px;
    border-radius: 4px;
    font-size: 0.8rem;
  }
  .quiz-result.correct { background: #d4edda; color: #155724; }
  .quiz-result.wrong { background: #f8d7da; color: #721c24; }
  .quiz-nav {
    display: flex;
    justify-content: space-between;
    margin-top: 20px;
  }
  .flashcard {
    perspective: 1000px;
    height: 300px;
    cursor: pointer;
  }
  .flashcard-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transition: transform 0.6s;
    transform-style: preserve-3d;
  }
  .flashcard.flipped .flashcard-inner { transform: rotateY(180deg); }
  .flashcard-front, .flashcard-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
    border: 2px solid var(--ink);
    border-radius: 8px;
    text-align: center;
  }
  .flashcard-back {
    transform: rotateY(180deg);
    background: var(--cream);
  }
  .flashcard-front h3 {
    font-family: 'Playfair Display', serif;
    font-size: 1.5rem;
    margin-bottom: 12px;
  }
  .flashcard-hint {
    font-size: 0.7rem;
    color: var(--muted);
    margin-top: 16px;
  }
  .flashcard-nav {
    display: flex;
    justify-content: center;
    gap: 12px;
    margin-top: 20px;
  }
  .flashcard-counter {
    font-size: 0.75rem;
    color: var(--muted);
    text-align: center;
    margin-top: 12px;
  }
  .close-modal {
    position: absolute;
    top: 16px;
    right: 16px;
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: var(--muted);
    line-height: 1;
  }
  .close-modal:hover { color: var(--ink); }
  .insights-content {
    max-width: 860px;
  }
  .insights-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(1.4rem, 3vw, 2rem);
    margin-bottom: 14px;
  }
  .insights-hint {
    margin-bottom: 10px;
    color: #4f4235;
    font-size: 0.86rem;
    line-height: 1.6;
    font-family: var(--ui-sans);
  }
  .insight-grid {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 14px;
  }
  .insight-grid section,
  .insight-plan {
    border: 1px solid #e6dbc6;
    border-radius: 8px;
    background: #f8f3ea;
    padding: 12px 14px;
  }
  .insight-grid h3,
  .insight-plan h3 {
    font-size: 0.7rem;
    letter-spacing: 0.09em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 8px;
  }
  .insight-grid ul,
  .insight-plan ol {
    margin: 0;
    padding-left: 18px;
    font-size: 0.82rem;
    line-height: 1.7;
    color: #2f271d;
    font-family: var(--ui-sans);
  }
  .insight-plan {
    margin-top: 12px;
  }
  .insight-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 7px;
  }
  .insight-tag {
    display: inline-flex;
    align-items: center;
    border-radius: 999px;
    padding: 4px 10px;
    background: var(--cream);
    color: #4a3e30;
    font-size: 0.72rem;
  }
  .insight-actions {
    margin-top: 14px;
  }
  .insight-textarea {
    width: 100%;
    min-height: 280px;
    border: 1px solid #e1d7c2;
    border-radius: 8px;
    background: #fffdfa;
    color: #2f271d;
    padding: 12px;
    line-height: 1.58;
    font-size: 0.8rem;
    font-family: "JetBrains Mono", "DM Mono", Menlo, Consolas, monospace;
    resize: vertical;
  }
  .prompt-builder-controls {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 10px;
    margin-bottom: 10px;
  }
  .prompt-builder-controls label {
    display: flex;
    flex-direction: column;
    gap: 6px;
    font-size: 0.66rem;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    color: var(--muted);
  }
  .prompt-builder-manual {
    border: 1px solid #e4d8c3;
    border-radius: 8px;
    background: #fcf8f1;
    padding: 10px;
    margin-bottom: 10px;
  }
  .prompt-builder-manual-head {
    display: flex;
    gap: 8px;
    align-items: center;
    margin-bottom: 8px;
  }
  .prompt-builder-search {
    width: 100%;
    max-width: none;
  }
  .prompt-note-list {
    max-height: 220px;
    overflow: auto;
    border-top: 1px solid #e8decf;
    padding-top: 8px;
  }
  .prompt-note-item {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    padding: 6px 0;
    cursor: pointer;
    font-family: var(--ui-sans);
    color: #2f271d;
  }
  .prompt-note-item input {
    margin-top: 3px;
  }
  .prompt-note-item span {
    display: grid;
    gap: 2px;
  }
  .prompt-note-item strong {
    font-size: 0.82rem;
    line-height: 1.4;
  }
  .prompt-note-item small {
    font-size: 0.7rem;
    color: #6b5d4d;
  }
  .prompt-builder-meta {
    margin: 6px 0 10px;
    font-family: var(--ui-sans);
    font-size: 0.78rem;
    color: #5f503f;
  }
  .prompt-builder-meta.warn {
    color: #9e3a17;
    font-weight: 600;
  }

  @media screen and (max-width: 640px) {
    .bias-detail-modal {
      padding: max(10px, env(safe-area-inset-top)) 10px max(10px, env(safe-area-inset-bottom));
      align-items: flex-start;
      overflow-y: auto;
    }
    .bias-detail-content {
      max-height: calc(100vh - 20px - env(safe-area-inset-top) - env(safe-area-inset-bottom));
      border-radius: 8px;
      margin: 0 auto;
    }
    .bias-detail-topbar {
      padding: 8px 8px 0;
    }
    .bias-detail-scroll {
      padding: 2px 18px 14px;
    }
    .bias-detail-footer {
      padding: 10px 18px calc(12px + env(safe-area-inset-bottom));
      gap: 8px;
    }
    .note-card { padding: 12px 10px 10px; }
    .note-card-head {
      flex-direction: column;
      align-items: stretch;
      margin-bottom: 10px;
    }
    .note-card-actions {
      width: 100%;
      display: grid;
      grid-template-columns: 1fr 1fr;
    }
    .note-card-actions .action-btn {
      width: 100%;
      font-size: 0.58rem;
      text-align: center;
    }
    .note-card-body {
      font-size: 0.84rem;
      line-height: 1.66;
    }
    .note-expand-btn { font-size: 0.6rem; }
    .bias-detail-title {
      font-size: 1.4rem;
      margin-right: 28px;
      margin-bottom: 8px;
    }
    .bias-detail-content .card-summary,
    .bias-detail-content .card-extra p,
    .bias-detail-content .card-extra li {
      font-size: 0.88rem;
      line-height: 1.7;
    }
    .bias-detail-content .action-btn {
      font-size: 0.62rem;
      letter-spacing: 0.04em;
    }
    .note-template-grid {
      grid-template-columns: 1fr;
      gap: 8px;
    }
    .insight-grid {
      grid-template-columns: 1fr;
      gap: 10px;
    }
    .insight-textarea {
      min-height: 220px;
      font-size: 0.74rem;
    }
    .prompt-builder-controls {
      grid-template-columns: 1fr;
      gap: 8px;
    }
    .prompt-builder-manual-head {
      flex-wrap: wrap;
    }
    .prompt-note-list {
      max-height: 180px;
    }
  }
  @media screen and (max-width: 640px) {
    @supports (height: 100dvh) {
      .bias-detail-content {
        max-height: calc(100dvh - 20px - env(safe-area-inset-top) - env(safe-area-inset-bottom));
      }
    }
  }

  .notes-section {
    margin-top: 14px;
    padding-top: 14px;
    border-top: 1px solid var(--cream);
  }
  .notes-section h3 { margin-bottom: 8px; }
  .notes-textarea {
    width: 100%;
    min-height: 60px;
    padding: 10px;
    border: 1px solid var(--cream);
    border-radius: 4px;
    font-family: 'DM Mono', monospace;
    font-size: 0.7rem;
    resize: vertical;
    background: transparent;
    color: var(--ink);
  }
  .notes-textarea:focus {
    outline: none;
    border-color: var(--ink);
  }
  .notes-textarea.compact {
    min-height: 72px;
    font-size: 0.76rem;
  }
  .note-template-grid {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 10px;
    margin-top: 10px;
  }
  .note-field-label {
    margin-top: 8px;
    display: flex;
    flex-direction: column;
    gap: 6px;
    font-size: 0.64rem;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    color: var(--muted);
  }
  .notes-input,
  .notes-select {
    width: 100%;
    height: 36px;
    padding: 7px 10px;
    border: 1px solid var(--cream);
    border-radius: 4px;
    background: transparent;
    color: var(--ink);
    font-family: var(--ui-sans);
    font-size: 0.82rem;
  }
  .notes-input:focus,
  .notes-select:focus {
    outline: none;
    border-color: var(--ink);
  }
  .note-tags {
    margin-top: 12px;
  }
  .note-tags-label {
    margin-bottom: 8px;
    font-size: 0.64rem;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    color: var(--muted);
  }
  .note-tags-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }
  .note-tag-btn {
    border: 1px solid #d7cdb8;
    background: transparent;
    color: #5b4d3e;
    border-radius: 999px;
    padding: 5px 10px;
    font-size: 0.68rem;
    cursor: pointer;
    text-transform: lowercase;
    font-family: var(--ui-sans);
  }
  .note-tag-btn:hover {
    border-color: var(--ink);
    color: var(--ink);
  }
  .note-tag-btn.active {
    background: var(--ink);
    color: var(--paper);
    border-color: var(--ink);
  }
  .note-inline-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin: 2px 0 10px;
  }
  .note-inline-tag {
    padding: 2px 8px;
    border-radius: 999px;
    background: var(--cream);
    color: #5a4d3f;
    font-size: 0.64rem;
    text-transform: lowercase;
  }

  .achievements-bar {
    padding: 12px 40px;
    background: var(--cream);
    display: flex;
    gap: 16px;
    overflow-x: auto;
    font-size: 0.74rem;
    font-family: var(--ui-sans);
  }
  .achievement {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 5px 11px;
    background: var(--card);
    border-radius: 20px;
    white-space: nowrap;
    opacity: 0.4;
    transition: opacity 0.2s;
  }
  .achievement.unlocked { opacity: 1; }
  .achievement-icon { font-size: 1rem; }
  .achievement-icon.fa-solid { font-size: 0.86rem; width: 1em; text-align: center; }

  /* LIST VIEW */
  body.list-view .grid {
    display: block;
    padding: 0 40px 40px;
  }
  body.list-view .card {
    border-radius: 0;
    border: none;
    border-bottom: 1px solid var(--cream);
    box-shadow: none;
    padding: 12px 16px 12px 22px;
    transform: none !important;
    display: flex;
    align-items: baseline;
    gap: 16px;
    animation: none !important;
  }
  body.list-view .card::before { width: 3px; border-radius: 0; }
  body.list-view .card:hover { background: var(--cream); border-bottom-color: var(--ink); }
  body.list-view .card.expanded { background: var(--cream); display: block; padding: 14px 16px 14px 22px; }
  body.list-view .card-number { display: none; }
  body.list-view .card h2 {
    font-size: 0.98rem;
    padding-right: 0;
    margin-bottom: 0;
    white-space: nowrap;
    flex-shrink: 0;
    width: 230px;
  }
  body.list-view .card-category {
    font-size: 0.63rem;
    margin-bottom: 0;
    white-space: nowrap;
    flex-shrink: 0;
    width: 90px;
  }
  body.list-view .card-summary {
    -webkit-line-clamp: 1;
    font-size: 0.8rem;
    flex: 1;
    color: var(--muted);
    font-family: var(--ui-sans);
  }
  body.list-view .card.expanded h2 { margin-bottom: 6px; }
  body.list-view .card.expanded .card-category { margin-bottom: 4px; }
  body.list-view .card.expanded .card-summary { display: block; -webkit-line-clamp: unset; color: #4a3e30; }
  body.list-view .expand-hint { display: none; }

  .no-results {
    text-align: center;
    padding: 80px 0;
    color: var(--muted);
    font-size: 0.9rem;
    letter-spacing: 0.02em;
    font-family: var(--ui-sans);
    grid-column: 1/-1;
  }
  .safety-banner {
    margin: 18px 40px 18px;
    border: 1px solid #ddcaa7;
    background: #fff5e3;
    border-radius: 6px;
    padding: 10px 12px;
    font-family: var(--ui-sans);
    font-size: 0.78rem;
    line-height: 1.6;
    color: #473928;
  }
  .safety-banner strong {
    color: #2f2619;
  }
  .safety-banner a {
    color: inherit;
    text-underline-offset: 0.14em;
  }
  .safety-banner a:hover {
    color: var(--ink);
  }
  footer {
    padding: 40px;
    border-top: 1px solid var(--cream);
    font-size: 0.72rem;
    color: var(--muted);
    letter-spacing: 0.02em;
    text-align: center;
    line-height: 1.9;
    font-family: var(--ui-sans);
  }
  footer a {
    color: inherit;
    text-decoration-thickness: 1px;
    text-underline-offset: 0.14em;
  }
  footer a:hover {
    color: var(--ink);
  }

  @media screen and (max-width: 640px) {
    header {
      padding: 40px 16px 24px;
      gap: 12px;
    }
    .tagline {
      max-width: none;
      text-align: left;
      font-size: 0.74rem;
    }
    .controls {
      padding: 14px 16px;
      gap: 7px;
    }
    .filter-btn,
    .surprise-btn,
    .view-btn {
      font-size: 0.66rem;
      padding: 6px 10px;
    }
    .search-input {
      font-size: 0.78rem;
      padding: 8px 10px;
    }
    .stats-bar,
    .progress-section,
    .achievements-bar,
    footer {
      padding-left: 16px;
      padding-right: 16px;
    }
    .safety-banner {
      margin: 14px 16px 0;
      font-size: 0.74rem;
      padding: 9px 10px;
    }
    .stats-bar { font-size: 0.7rem; }
    .grid {
      padding: 18px 16px 24px;
      gap: 14px;
      grid-template-columns: 1fr;
    }
    .card { padding: 20px 18px 16px; }
    .card h2 {
      font-size: 1.08rem;
      margin-bottom: 8px;
    }
    .card-summary {
      font-size: 0.83rem;
      line-height: 1.68;
    }
    .expand-hint { font-size: 0.62rem; }
    body.list-view .grid { padding: 0 16px 24px; }
    body.list-view .card h2 {
      width: auto;
      min-width: 160px;
      font-size: 0.92rem;
    }
    body.list-view .card-summary { font-size: 0.76rem; }
  }
</style>
</head>
<body>
<div class="page-wrap">
  <header>
    <h1><span>Complete Field Guide to</span>Cognitive<br>Biases</h1>
    <p class="tagline">165 systematic quirks of the human mind</p>
  </header>
  <div class="safety-banner">
    <strong>Self-help reflection tool:</strong> This app supports self-awareness and is not a diagnosis or crisis service.
    If you are in immediate danger, call your local emergency number.
    For crisis lines worldwide, use <a href="https://findahelpline.com/" target="_blank" rel="noopener noreferrer">Findahelpline.com</a>.
    If you are in the U.S. or Canada, call or text <a href="https://988lifeline.org/" target="_blank" rel="noopener noreferrer">988</a>.
  </div>
  <div class="progress-section" id="progressBar"></div>
  <div class="achievements-bar" id="achievementsBar"></div>
  <div class="controls">
    <span class="filter-label">Category:</span>
    <button class="filter-btn active" data-cat="all">All</button>
    <button class="filter-btn" data-cat="unread">Unread</button>
    <button class="filter-btn" data-cat="read">Read</button>
    <button class="filter-btn" data-cat="estimation">Estimation</button>
    <button class="filter-btn" data-cat="decision">Decision</button>
    <button class="filter-btn" data-cat="hypothesis">Hypothesis</button>
    <button class="filter-btn" data-cat="attribution">Attribution</button>
    <button class="filter-btn" data-cat="memory">Memory</button>
    <button class="filter-btn" data-cat="social">Social</button>
  </div>
  <div class="controls">
    <input type="text" class="search-input" placeholder="Search biases..." id="searchInput" style="flex:1;">
    <button class="surprise-btn" id="surpriseBtn"><i class="fa-solid fa-dice icon-inline" aria-hidden="true"></i>Surprise me</button>
    <button class="surprise-btn" id="quizBtn" style="margin-left:4px;"><i class="fa-solid fa-circle-question icon-inline" aria-hidden="true"></i>Quiz</button>
    <button class="surprise-btn" id="flashcardBtn" style="margin-left:4px;"><i class="fa-solid fa-layer-group icon-inline" aria-hidden="true"></i>Flashcards</button>
    <button class="surprise-btn" id="notesBtn" style="margin-left:4px;"><i class="fa-solid fa-note-sticky icon-inline" aria-hidden="true"></i>All notes</button>
    <button class="surprise-btn" id="mirrorBtn" style="margin-left:4px;"><i class="fa-solid fa-chart-line icon-inline" aria-hidden="true"></i>Pattern mirror</button>
    <button class="surprise-btn" id="reportBtn" style="margin-left:4px;"><i class="fa-solid fa-file-lines icon-inline" aria-hidden="true"></i>Weekly report</button>
    <button class="surprise-btn" id="aiPromptBtn" style="margin-left:4px;"><i class="fa-solid fa-robot icon-inline" aria-hidden="true"></i>AI prompt</button>
    <button class="surprise-btn reset-btn" id="resetProgressBtn" style="margin-left:4px;"><i class="fa-solid fa-rotate-left icon-inline" aria-hidden="true"></i>Reset progress</button>
    <div class="view-toggle">
      <button class="view-btn active" id="gridBtn"><i class="fa-solid fa-table-cells-large icon-inline" aria-hidden="true"></i>Grid</button>
      <button class="view-btn" id="listBtn"><i class="fa-solid fa-list icon-inline" aria-hidden="true"></i>List</button>
    </div>
  </div>
  <div class="stats-bar" id="statsBar">Loading…</div>
  <div class="grid" id="grid"></div>
  <footer>
    Sources:
    <a href="https://en.wikipedia.org/wiki/List_of_cognitive_biases" target="_blank" rel="noopener noreferrer">Wikipedia</a> ·
    <a href="https://pubmed.ncbi.nlm.nih.gov/17835457/" target="_blank" rel="noopener noreferrer">Kahneman &amp; Tversky (1974)</a> ·
    <a href="https://busterbenson.com/2016/09/01/cognitive-bias-cheat-sheet" target="_blank" rel="noopener noreferrer">Buster Benson's Cognitive Bias Cheat Sheet</a> ·
    <a href="https://thedecisionlab.com/reference-guide/psychology/biases" target="_blank" rel="noopener noreferrer">The Decision Lab</a><br>
    165 documented biases across 6 categories. Click any card for details.
  </footer>
</div>
<script src="assets/js/cognitive-biases.js"></script>
</body>
</html>
